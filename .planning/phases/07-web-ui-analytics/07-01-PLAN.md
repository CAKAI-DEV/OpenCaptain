---
phase: 07-web-ui-analytics
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - web/package.json
  - web/tsconfig.json
  - web/next.config.ts
  - web/tailwind.config.ts
  - web/components.json
  - web/src/app/layout.tsx
  - web/src/app/globals.css
  - web/src/lib/utils.ts
  - web/src/components/ui/button.tsx
  - web/src/components/ui/card.tsx
  - web/src/components/ui/input.tsx
  - web/src/types/api.ts
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Next.js dev server starts without errors"
    - "Tailwind styles render correctly in browser"
    - "shadcn/ui Button and Card components work"
  artifacts:
    - path: "web/package.json"
      provides: "Project dependencies and scripts"
      contains: "next"
    - path: "web/src/app/layout.tsx"
      provides: "Root layout with fonts and metadata"
      contains: "RootLayout"
    - path: "web/src/lib/utils.ts"
      provides: "cn() utility for class merging"
      exports: ["cn"]
    - path: "web/src/components/ui/button.tsx"
      provides: "Button component from shadcn/ui"
      exports: ["Button"]
  key_links:
    - from: "web/src/app/layout.tsx"
      to: "web/src/app/globals.css"
      via: "CSS import"
      pattern: "import.*globals\\.css"
    - from: "web/src/components/ui/button.tsx"
      to: "web/src/lib/utils.ts"
      via: "cn utility import"
      pattern: "import.*cn.*from.*lib/utils"
---

<objective>
Set up Next.js 15 project with App Router, Tailwind 4, and shadcn/ui foundation.

Purpose: Establish the web frontend project structure with all tooling configured and ready for feature development.
Output: Working Next.js app in `web/` directory with shadcn/ui components, Tailwind 4, and TypeScript types.
</objective>

<execution_context>
@/Users/dio/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dio/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-web-ui-analytics/07-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Next.js project with Tailwind and TypeScript</name>
  <files>
    - web/package.json
    - web/tsconfig.json
    - web/next.config.ts
    - web/tailwind.config.ts
    - web/postcss.config.mjs
    - web/src/app/layout.tsx
    - web/src/app/page.tsx
    - web/src/app/globals.css
  </files>
  <action>
Create the Next.js project in a `web/` subdirectory (separate from the API in the root).

Run from project root:
```bash
cd /Users/dio/RnD
npx create-next-app@latest web --typescript --tailwind --eslint --app --src-dir --turbopack --use-npm
```

After creation, update package.json scripts to use Turbopack:
- `"dev": "next dev --turbopack"`

Configure next.config.ts for API proxy:
- Add rewrites to proxy `/api/v1/*` to the backend at `http://localhost:3000/api/v1/*`
- This avoids CORS issues during development

Update src/app/page.tsx to show a simple "BlockBot" heading (placeholder for dashboard).
  </action>
  <verify>
```bash
cd /Users/dio/RnD/web && npm run dev &
sleep 5
curl -s http://localhost:3001 | grep -q "BlockBot" && echo "OK" || echo "FAIL"
kill %1 2>/dev/null
```
  </verify>
  <done>Next.js dev server runs on port 3001, shows BlockBot heading, Tailwind styles work</done>
</task>

<task type="auto">
  <name>Task 2: Initialize shadcn/ui with core components</name>
  <files>
    - web/components.json
    - web/src/lib/utils.ts
    - web/src/components/ui/button.tsx
    - web/src/components/ui/card.tsx
    - web/src/components/ui/input.tsx
    - web/src/components/ui/form.tsx
    - web/src/components/ui/label.tsx
    - web/src/components/ui/dialog.tsx
    - web/src/components/ui/dropdown-menu.tsx
    - web/src/components/ui/select.tsx
    - web/src/components/ui/badge.tsx
    - web/src/components/ui/skeleton.tsx
    - web/src/components/ui/toast.tsx
    - web/src/components/ui/toaster.tsx
    - web/src/hooks/use-toast.ts
  </files>
  <action>
Initialize shadcn/ui and add core components needed for the dashboard.

```bash
cd /Users/dio/RnD/web
npx shadcn@latest init --defaults
```

Add the components we'll need across all plans:
```bash
npx shadcn@latest add button card input form label dialog dropdown-menu select badge skeleton toast
```

The `cn()` utility will be created in `src/lib/utils.ts` by the init command.

Update tailwind.config.ts if needed to include the shadcn/ui color variables from CSS.
  </action>
  <verify>
Check that components exist and export correctly:
```bash
cd /Users/dio/RnD/web
test -f src/components/ui/button.tsx && echo "Button OK"
test -f src/components/ui/card.tsx && echo "Card OK"
test -f src/lib/utils.ts && echo "Utils OK"
grep -q "export function cn" src/lib/utils.ts && echo "cn() OK"
```
  </verify>
  <done>shadcn/ui initialized, Button/Card/Input/Form/Dialog/DropdownMenu/Select/Badge/Skeleton/Toast components available</done>
</task>

<task type="auto">
  <name>Task 3: Create shared TypeScript types for API responses</name>
  <files>
    - web/src/types/api.ts
    - web/src/types/task.ts
    - web/src/types/project.ts
    - web/src/types/user.ts
    - web/src/types/analytics.ts
  </files>
  <action>
Create TypeScript type definitions matching the backend API response shapes.

Create web/src/types/api.ts:
```typescript
// Generic API response wrapper (matches backend createResponse)
export interface ApiResponse<T> {
  data: T
}

// Paginated response (matches backend createPaginatedResponse)
export interface PaginatedResponse<T> {
  data: T[]
  pagination: {
    page: number
    limit: number
    total: number
    totalPages: number
  }
}

// API error response (RFC 7807)
export interface ApiError {
  type: string
  title: string
  status: number
  detail: string
  instance: string
}
```

Create web/src/types/user.ts:
```typescript
export interface User {
  id: string
  email: string
  orgId: string
}

export interface AuthResponse {
  user: User
  accessToken: string
  refreshToken: string
}
```

Create web/src/types/project.ts:
```typescript
export interface Project {
  id: string
  orgId: string
  name: string
  description: string | null
  createdAt: string
  updatedAt: string
}
```

Create web/src/types/task.ts:
```typescript
export type TaskStatus = 'todo' | 'in_progress' | 'done'
export type TaskPriority = 'low' | 'medium' | 'high' | 'urgent'

export interface Task {
  id: string
  projectId: string
  squadId: string | null
  parentTaskId: string | null
  title: string
  description: string | null
  status: TaskStatus
  priority: TaskPriority
  assigneeId: string | null
  createdById: string
  dueDate: string | null
  completedAt: string | null
  depth: number
  customFieldValues: Record<string, unknown> | null
  createdAt: string
  updatedAt: string
}

export interface CreateTaskInput {
  projectId: string
  squadId?: string
  parentTaskId?: string
  title: string
  description?: string
  priority?: TaskPriority
  assigneeId?: string
  dueDate?: string
  customFieldValues?: Record<string, unknown>
}

export interface UpdateTaskInput {
  title?: string
  description?: string | null
  priority?: TaskPriority
  status?: TaskStatus
  assigneeId?: string | null
  dueDate?: string | null
  squadId?: string | null
  customFieldValues?: Record<string, unknown>
}
```

Create web/src/types/analytics.ts:
```typescript
export interface OutputMetrics {
  byUser: Array<{
    userId: string
    tasksCompleted: number
    deliverablesCompleted: number
  }>
  bySquad: Array<{
    squadId: string
    tasksCompleted: number
    deliverablesCompleted: number
  }>
  totals: {
    tasksCompleted: number
    deliverablesCompleted: number
  }
}

export interface VelocityPeriod {
  periodStart: string
  periodEnd: string
  velocity: number
}

export interface BurndownPoint {
  date: string
  remaining: number
  completed: number
}

export interface PersonalMetrics {
  tasksCompleted: number
  deliverablesCompleted: number
  tasksByPriority: Record<string, number>
  averageCompletionTime: number | null
}

export type HealthLevel = 'healthy' | 'warning' | 'critical'
```

Create index file web/src/types/index.ts that re-exports all types.
  </action>
  <verify>
```bash
cd /Users/dio/RnD/web
npx tsc --noEmit src/types/*.ts && echo "Types OK"
```
  </verify>
  <done>TypeScript types for User, Project, Task, Analytics, API responses created and type-check passes</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `cd /Users/dio/RnD/web && npm run dev` starts without errors
2. Visit http://localhost:3001 shows styled page
3. `npm run lint` passes
4. All UI components import without TypeScript errors
</verification>

<success_criteria>
- Next.js 15 project created in web/ directory
- Tailwind 4 configured and working
- shadcn/ui initialized with core components (Button, Card, Input, Form, Dialog, etc.)
- TypeScript types defined for API integration
- Dev server runs on port 3001 with Turbopack
- API proxy configured to forward /api/v1/* to backend
</success_criteria>

<output>
After completion, create `.planning/phases/07-web-ui-analytics/07-01-SUMMARY.md`
</output>
